(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{84:function(e,t,n){},85:function(e,t,n){"use strict";n.r(t);var s=n(0),a=n.n(s),i=n(40),c=n.n(i),o=n(7),r=n(8),l=n(6),u=n(14),j=n(13),d=n(16),h=n.n(d),b=n(3),O=n(21),g=n(10),m=n(88),p=n(1),f=function(){return Object(p.jsx)(m.a,{negative:!0,header:"Whoops! This email is taken.",content:"Use another email."})},v=function(){return Object(p.jsx)(m.a,{negative:!0,header:"Incorrect email or password.",content:"Try, again."})},x=function(e){return!1===e.loggedIn?Object(p.jsx)(v,{}):null},C=new(function(){function e(){Object(o.a)(this,e),this.authenticated=!1,this.user=null,this.token=null}return Object(r.a)(e,[{key:"login",value:function(e){this.authenticated=!0,e()}},{key:"logout",value:function(e){this.authenticated=!1,e()}},{key:"isAuth",value:function(){return this.authenticated}},{key:"getUser",value:function(){return this.user}},{key:"setToken",value:function(e){this.token=e}},{key:"setUser",value:function(e){this.user=e}}]),e}()),w=function(e){Object(u.a)(n,e);var t=Object(j.a)(n);function n(e){var s;return Object(o.a)(this,n),(s=t.call(this,e)).onChangeEmail=function(e){s.setState({email:e.target.value})},s.onChangePassword=function(e){s.setState({password:e.target.value})},s.onChangeEmail=s.onChangeEmail.bind(Object(l.a)(s)),s.onChangePassword=s.onChangePassword.bind(Object(l.a)(s)),s.getSubmit=s.getSubmit.bind(Object(l.a)(s)),s.state={email:"",password:"",loggedIn:null},s}return Object(r.a)(n,[{key:"getSubmit",value:function(e){var t=this;e.preventDefault();var n={email:this.state.email,password:this.state.password};h.a.post("http://localhost:3131/login",{withCredentials:!0},n).then((function(e){console.log(e),"mismatch"===e.data.authentication||"no-match"===e.data.authentication?t.setState({loggedIn:!1}):C.login((function(){t.setUser(n.email),t.setToken(e.token),t.props.history.push("/upload")}))})).catch((function(e){t.props.history.push("/")}))}},{key:"render",value:function(){return Object(p.jsxs)("div",{children:[Object(p.jsx)(x,{loggedIn:this.state.loggedIn}),Object(p.jsx)("form",{class:"ui large form",onSubmit:this.getSubmit,children:Object(p.jsxs)("div",{class:"ui stacked segment",children:[Object(p.jsxs)("div",{class:"field",children:[Object(p.jsx)("label",{children:"Email"}),Object(p.jsx)("input",{onChange:this.onChangeEmail,value:this.state.email,type:"email",id:"email",name:"email"})]}),Object(p.jsxs)("div",{class:"field",children:[Object(p.jsx)("label",{children:"Password"}),Object(p.jsx)("input",{type:"password",id:"password",name:"password",value:this.state.password,onChange:this.onChangePassword})]}),Object(p.jsx)("button",{class:"ui fluid large teal submit button",type:"submit",children:"Submit"})]})})]})}}]),n}(a.a.Component),k=Object(b.g)(w),y=function(e){Object(u.a)(n,e);var t=Object(j.a)(n);function n(e){var s;return Object(o.a)(this,n),(s=t.call(this,e)).state={currentUser:C.getUser()},s.state.currentUser?Object(O.a)(s,s.props.history.push("/upload")):s}return Object(r.a)(n,[{key:"render",value:function(){return Object(p.jsx)("div",{class:"ui container",children:Object(p.jsxs)("div",{class:"ui middle aligned center aligned grid",children:[Object(p.jsx)("div",{class:"column",children:Object(p.jsx)("h1",{children:" login "})}),Object(p.jsx)(k,{}),Object(p.jsxs)("div",{class:"ui message",children:['"Don\'t have an account?"',Object(p.jsx)(g.b,{to:"/register",children:"Register"})]})]})})}}]),n}(a.a.Component),S=Object(b.g)((function(e){return Object(p.jsxs)("div",{class:"ui four item menu",children:[Object(p.jsx)(g.b,{class:"item",to:"/",children:"Home"}),Object(p.jsx)(g.b,{class:"item",to:"/upload",children:"Upload"}),Object(p.jsx)(g.b,{class:"item",to:"/receipts",children:"Receipts"}),Object(p.jsx)(g.b,{class:"item",onClick:function(){C.logout((function(){return e.history.push("/")}))},children:"Log Out"})]})})),U=function(e){Object(u.a)(n,e);var t=Object(j.a)(n);function n(e){var s;return Object(o.a)(this,n),(s=t.call(this,e)).onChangeFile=function(e){s.setState({fileChosen:e.target.files[0]})},s.onSubmitFile=function(e){e.preventDefault();var t=new FormData;t.append("avatar",s.state.fileChosen);h.a.post("http://localhost:9696/upload",t,{headers:{"content-type":"multipart/form-data"}}).then((function(e){console.log(e.data)})).catch((function(e){console.log(e)}))},s.onChangeFile=s.onChangeFile.bind(Object(l.a)(s)),s.state={fileChosen:null,loggedIn:!0},s}return Object(r.a)(n,[{key:"render",value:function(){return Object(p.jsx)("div",{class:"ui large form",children:Object(p.jsxs)("form",{id:"upload-form",children:[Object(p.jsx)("label",{children:"Upload"}),Object(p.jsx)("input",{class:"ui input",id:"fileUpload",onChange:this.onChangeFile,type:"file",name:"avatar"}),Object(p.jsx)("button",{class:"ui large blue button",type:"submit",onClick:this.onSubmitFile,children:"Upload"})]})})}}]),n}(a.a.Component),P=function(){return Object(p.jsxs)("div",{class:"ui container",children:[Object(p.jsx)(S,{}),Object(p.jsx)("h1",{children:" Upload Receipt "}),Object(p.jsx)(U,{})]})},E=function(e){Object(u.a)(n,e);var t=Object(j.a)(n);function n(e){var s;return Object(o.a)(this,n),(s=t.call(this,e)).state={currentUser:C.getUser()},s.state.currentUser&&s.props.history.push("/upload"),s}return Object(r.a)(n,[{key:"render",value:function(){return Object(p.jsxs)("div",{class:"ui container",children:[Object(p.jsx)(S,{}),Object(p.jsx)("h1",{children:" Current Receipts "})]})}}]),n}(a.a.Component),F=function(){return Object(p.jsx)(m.a,{success:!0,header:"Congratulations! You're registered.",content:"You may log in."})},T=function(e){var t=e.success;return!0===t?Object(p.jsx)(F,{}):!1===t?Object(p.jsx)(f,{}):null},I=function(e){Object(u.a)(n,e);var t=Object(j.a)(n);function n(e){var s;return Object(o.a)(this,n),(s=t.call(this,e)).onChangeEmail=function(e){s.setState({email:e.target.value})},s.onChangePassword=function(e){s.setState({password:e.target.value})},s.onChangeEmail=s.onChangeEmail.bind(Object(l.a)(s)),s.onChangePassword=s.onChangePassword.bind(Object(l.a)(s)),s.getSubmit=s.getSubmit.bind(Object(l.a)(s)),s.state={email:"",password:"",loading:!1,success:null},s}return Object(r.a)(n,[{key:"getSubmit",value:function(e){var t=this;e.preventDefault();var n={email:this.state.email,password:this.state.password};h.a.post("http://localhost:3131/register",n).then((function(e){t.setState({success:!0})})).catch((function(e){t.setState({success:!1})}))}},{key:"render",value:function(){return Object(p.jsxs)("div",{children:[Object(p.jsx)(T,{success:this.state.success}),Object(p.jsx)("form",{class:"ui large form",onSubmit:this.getSubmit,children:Object(p.jsxs)("div",{class:"ui stacked segment",children:[Object(p.jsxs)("div",{class:"field",children:[Object(p.jsx)("label",{children:"Email"}),Object(p.jsx)("input",{onChange:this.onChangeEmail,value:this.state.email,type:"email",id:"email",name:"email"})]}),Object(p.jsxs)("div",{class:"field",children:[Object(p.jsx)("label",{children:"Password"}),Object(p.jsx)("input",{type:"password",id:"password",name:"password",value:this.state.password,onChange:this.onChangePassword})]}),Object(p.jsx)("button",{class:"ui fluid large teal submit button",type:"submit",children:"Submit"})]})})]})}}]),n}(a.a.Component),D=function(){return Object(p.jsx)("div",{class:"ui container",children:Object(p.jsxs)("div",{class:"ui middle aligned center aligned grid",children:[Object(p.jsx)("div",{class:"column",children:Object(p.jsx)("h1",{children:" Register "})}),Object(p.jsx)(I,{})]})})},R=n(22),L=n(43),A=["component"],B=function(e){var t=e.component,n=Object(L.a)(e,A);return Object(p.jsx)(b.b,Object(R.a)(Object(R.a)({},n),{},{render:function(e){return!0===C.isAuth()?Object(p.jsx)(t,Object(R.a)({},e)):Object(p.jsx)(b.a,{to:{pathname:"/",state:{from:e.location}}})}}))},J=function(e){Object(u.a)(n,e);var t=Object(j.a)(n);function n(e){var s;return Object(o.a)(this,n),(s=t.call(this,e)).getToken=function(){h.a.get("/",{withCredentials:!0}).then((function(e){s.setState({jwt:e.data.token})}))},s.setUser=function(){s.setState({user:C.getUser()})},s.getToken=s.getToken.bind(Object(l.a)(s)),s.setUser=s.setUser.bind(Object(l.a)(s)),s.state={user:C.getUser(),jwt:null},s}return Object(r.a)(n,[{key:"componentDidMount",value:function(){this.getToken()}},{key:"componentDidUpdate",value:function(){this.getToken()}},{key:"render",value:function(){return Object(p.jsxs)(b.d,{children:[Object(p.jsx)(b.b,{path:"/",exact:!0,component:y}),Object(p.jsx)(B,{path:"/upload",exact:!0,component:P}),Object(p.jsx)(B,{path:"/receipts",exact:!0,component:E}),Object(p.jsx)(b.b,{path:"/register",exact:!0,component:D})]})}}]),n}(a.a.Component),Y=(n(83),n(84),function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,89)).then((function(t){var n=t.getCLS,s=t.getFID,a=t.getFCP,i=t.getLCP,c=t.getTTFB;n(e),s(e),a(e),i(e),c(e)}))});c.a.render(Object(p.jsx)(g.a,{children:Object(p.jsx)(J,{})}),document.getElementById("root")),Y()}},[[85,1,2]]]);
//# sourceMappingURL=main.4c30e78e.chunk.js.map